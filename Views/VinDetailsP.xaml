<Window x:Class="Bloc3_Caviste.Views.VinDetailsP"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:local="clr-namespace:Bloc3_Caviste.Views"
        mc:Ignorable="d"
        Background="{DynamicResource FondPrincipal}"
        Title="VinDetailsP" Height="550" Width="1280">
    <Grid Margin="6">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="52"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Barre titre Fenetre Controle -->
            <Grid Grid.Row="0">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,5,0,5">
                    <TextBlock Text="Vins" Margin="0,0,0,0" VerticalAlignment="Center" FontFamily="{DynamicResource Limelight}" FontWeight="SemiBold" FontSize="30" Foreground="{DynamicResource Primaire}"/>

                </StackPanel>
            </Grid>

            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="2*"/>
                </Grid.ColumnDefinitions>

                <!-- Ligne 1 : Client -->
                <Grid Grid.Column="0" VerticalAlignment="Top">
                    <Border Height="230" CornerRadius="8" Padding="9" Background="{DynamicResource FondPrincipal}" BorderBrush="{DynamicResource Primaire}" BorderThickness="1" Margin="0,0,9,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="30*"/>
                                <ColumnDefinition Width="31*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Border Grid.Row="0" CornerRadius="5" Margin="0,0,0,9" Background="{DynamicResource Accent}" Padding="5" HorizontalAlignment="Left" VerticalAlignment="Top">
                                <Border.Effect>
                                    <DropShadowEffect Color="Black" BlurRadius="5" Direction="315" ShadowDepth="3" Opacity="0.3"/>
                                </Border.Effect>
                                <TextBlock Text="Nom Vin" FontFamily="{DynamicResource Limelight}" FontWeight="Regular" FontSize="20" Foreground="{DynamicResource BoutonHover}"/>
                            </Border>

                            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,5,0,5" Grid.ColumnSpan="2">
                                <Border CornerRadius="5" Background="{DynamicResource Accent}" Padding="5" Margin="0,0,20,0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <Border.Effect>
                                        <DropShadowEffect Color="Black" BlurRadius="5" Direction="315" ShadowDepth="3" Opacity="0.3"/>
                                    </Border.Effect>
                                    <TextBlock Text="Type du vin" FontFamily="{DynamicResource Inter}" FontWeight="Regular" FontSize="20" Foreground="{DynamicResource BoutonHover}"/>
                                </Border>
                                <Border CornerRadius="5" Background="{DynamicResource Accent}" Padding="5" Margin="0,0,20,0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <Border.Effect>
                                        <DropShadowEffect Color="Black" BlurRadius="5" Direction="315" ShadowDepth="3" Opacity="0.3"/>
                                    </Border.Effect>
                                    <TextBlock Text="localisation" FontFamily="{DynamicResource Inter}" FontWeight="Regular" FontSize="20" Foreground="{DynamicResource BoutonHover}"/>
                                </Border>
                                <Border CornerRadius="5" Background="{DynamicResource Accent}" Padding="5" Margin="0,0,20,0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <Border.Effect>
                                        <DropShadowEffect Color="Black" BlurRadius="5" Direction="315" ShadowDepth="3" Opacity="0.3"/>
                                    </Border.Effect>
                                    <TextBlock Text="Prix" FontFamily="{DynamicResource Inter}" FontWeight="Regular" FontSize="20" Foreground="{DynamicResource BoutonHover}"/>
                                </Border>
                            </StackPanel>
                            <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,15,0,5" Grid.ColumnSpan="2">
                                <Border CornerRadius="5" Background="{DynamicResource Accent}" Padding="5" Margin="0,0,20,0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <Border.Effect>
                                        <DropShadowEffect Color="Black" BlurRadius="5" Direction="315" ShadowDepth="3" Opacity="0.3"/>
                                    </Border.Effect>
                                    <TextBlock Text="Stock" FontFamily="{DynamicResource Inter}" FontWeight="Regular" FontSize="20" Foreground="{DynamicResource BoutonHover}"/>
                                </Border>
                                <Border CornerRadius="5" Background="{DynamicResource Accent}" Padding="5" Margin="0,0,20,0" HorizontalAlignment="Left" VerticalAlignment="Center">
                                    <Border.Effect>
                                        <DropShadowEffect Color="Black" BlurRadius="5" Direction="315" ShadowDepth="3" Opacity="0.3"/>
                                    </Border.Effect>
                                    <TextBlock Text="Seuil" FontFamily="{DynamicResource Inter}" FontWeight="Regular" FontSize="20" Foreground="{DynamicResource BoutonHover}"/>
                                </Border>
                            </StackPanel>
                            <Border Grid.Row="3" CornerRadius="5" Background="{DynamicResource BoutonHover}" Padding="5" Margin="0,7,0,0" HorizontalAlignment="Left" VerticalAlignment="Top">
                                <Border.Effect>
                                    <DropShadowEffect Color="Black" BlurRadius="5" Direction="315" ShadowDepth="3" Opacity="0.3"/>
                                </Border.Effect>
                                <TextBlock Text="Stock alerte" FontFamily="{DynamicResource Inter}" FontWeight="Regular" FontSize="20" Foreground="{DynamicResource Accent}"/>
                            </Border>
                        </Grid>
                    </Border>
                </Grid>

                <Grid Grid.Column="1" Margin="0,0,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Border Grid.Row="0" CornerRadius="8" Padding="6" Background="{DynamicResource FondPrincipal}" BorderBrush="{DynamicResource Primaire}" BorderThickness="1" Margin="0,0,0,9">
                        <DockPanel>
                            <TextBlock Text="Historique des ventes" FontWeight="SemiBold" FontSize="14" Foreground="{DynamicResource Primaire}" Margin="2,0,0,4" DockPanel.Dock="Top"/>
                            <DataGrid x:Name="VenteHistorique"
                                  ItemsSource="{Binding Products}"
                                  SelectedItem="{Binding SelectedProduct, Mode=TwoWay}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  IsReadOnly="True"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="None"
                                  RowHeight="32"
                                  SelectionMode="Single"
                                  Margin="0">
                                <DataGrid.Resources>
                                    <Style TargetType="DataGridRow">
                                        <Setter Property="Cursor" Value="Hand"/>
                                    </Style>
                                    <!-- Convertisseur visibilité stock bas -->
                                    <!--<local:LowStockVisibilityConverter x:Key="LowStockVisibilityConverter"/>-->
                                </DataGrid.Resources>
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Code" Binding="{Binding Code}" Width="80"/>
                                    <DataGridTextColumn Header="Nom" Binding="{Binding Name}" Width="*"/>
                                    <DataGridTextColumn Header="Prix" Binding="{Binding Price, StringFormat={}{0:C2}}" Width="90"/>
                                    <DataGridTextColumn Header="Stock" Binding="{Binding Stock}" Width="70"/>
                                    <!-- Colonne Alertes -->
                                    <DataGridTemplateColumn Header="Alertes" Width="120">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Border CornerRadius="4"
                                                    Padding="4"
                                                    Background="{DynamicResource BoutonPress}"
                                                    Visibility="{Binding Stock, Converter={StaticResource LowStockVisibilityConverter}, ConverterParameter=5}">
                                                    <TextBlock Text="Stock bas"
                                                           Foreground="{DynamicResource AccentClair}"
                                                           FontWeight="SemiBold"
                                                           HorizontalAlignment="Center"/>
                                                </Border>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </DockPanel>
                    </Border>
                    <Border Grid.Row="1" CornerRadius="8" Padding="6" Background="{DynamicResource FondPrincipal}" BorderBrush="{DynamicResource Primaire}" BorderThickness="1">
                        <DockPanel>
                            <TextBlock Text="Fournisseur" FontWeight="SemiBold" FontSize="14" Foreground="{DynamicResource Primaire}" Margin="2,0,0,4" DockPanel.Dock="Top"/>
                            <DataGrid x:Name="Fournisseur"
                                  ItemsSource="{Binding Products}"
                                  SelectedItem="{Binding SelectedProduct, Mode=TwoWay}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  IsReadOnly="True"
                                  HeadersVisibility="Column"
                                  GridLinesVisibility="None"
                                  RowHeight="32"
                                  SelectionMode="Single"
                                  Margin="0">
                                <DataGrid.Resources>
                                    <Style TargetType="DataGridRow">
                                        <Setter Property="Cursor" Value="Hand"/>
                                    </Style>
                                    <!-- Convertisseur visibilité stock bas -->
                                    <!--<local:LowStockVisibilityConverter x:Key="LowStockVisibilityConverter"/>-->
                                </DataGrid.Resources>
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Code" Binding="{Binding Code}" Width="80"/>
                                    <DataGridTextColumn Header="Nom" Binding="{Binding Name}" Width="*"/>
                                    <DataGridTextColumn Header="Prix" Binding="{Binding Price, StringFormat={}{0:C2}}" Width="90"/>
                                    <DataGridTextColumn Header="Stock" Binding="{Binding Stock}" Width="70"/>
                                    <!-- Colonne Alertes -->
                                    <DataGridTemplateColumn Header="Alertes" Width="120">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Border CornerRadius="4"
                                                    Padding="4"
                                                    Background="{DynamicResource BoutonPress}"
                                                    Visibility="{Binding Stock, Converter={StaticResource LowStockVisibilityConverter}, ConverterParameter=5}">
                                                    <TextBlock Text="Stock bas"
                                                           Foreground="{DynamicResource AccentClair}"
                                                           FontWeight="SemiBold"
                                                           HorizontalAlignment="Center"/>
                                                </Border>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>
                        </DockPanel>
                    </Border>
                </Grid>


            </Grid>
        </Grid>
    </Grid>

</Window>
